"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var r=[],n=!0,a=!1,s=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){a=!0,s=e}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return r}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,a,s,i){try{var o=e[s](i),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}function _asyncToGenerator(o){return function(){var e=this,i=arguments;return new Promise(function(t,r){var n=o.apply(e,i);function a(e){asyncGeneratorStep(n,t,r,a,s,"next",e)}function s(e){asyncGeneratorStep(n,t,r,a,s,"throw",e)}a(void 0)})}}var api="https://master-7rqtwti-fus3tltfddn7w.eu-2.platformsh.site",loadButton=document.getElementById("load-button");function getRequest(n){return new Promise(function(e,t){var r=new XMLHttpRequest;r.open("GET",n),r.onreadystatechange=function(){4===r.readyState&&(200!==r.status&&t(JSON.parse(r.response)),e(JSON.parse(r.response)))},r.send()})}function getBlogPost(){return _getBlogPost.apply(this,arguments)}function _getBlogPost(){return(_getBlogPost=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n,a,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=getRequest(api+"/generate-title"),r=getRequest(api+"/generate-lorem"),e.prev=2,e.next=5,Promise.all([t,r]);case 5:n=e.sent,a=_slicedToArray(n,2),s=a[0],i=a[1],document.querySelector("main").appendChild(buildPostElement(s.title,i.lorem)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),document.querySelector("main").appendChild(buildPostElement("An error occurred!",e.t0));case 15:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function buildPostElement(e,t){var r=document.createElement("div"),n=document.createElement("div"),a=document.createElement("h2"),s=document.createElement("p");return r.classList.add("card"),n.classList.add("card-body"),a.classList.add("card-title"),s.classList.add("card-text"),a.textContent=e,s.textContent=t,n.appendChild(a),n.appendChild(s),r.appendChild(n),r}loadButton.addEventListener("click",_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:getBlogPost();case 1:case"end":return e.stop()}},e)})));var newsLetterButton=document.getElementById("newsletter-button"),newsLetterSection=document.getElementById("newsletter-section"),newsLetterEmail=document.getElementById("newsletter-email"),sentEmail=!1;newsLetterButton.addEventListener("click",function(){var e=document.createElement("p");if(!sentEmail){var t=document.getElementById("alert");if(t&&t.parentElement.removeChild(t),!newsLetterEmail.value)return e.textContent="Please enter something!",e.classList.add("alert-danger","w-100","p-2"),e.setAttribute("id","alert"),void newsLetterSection.appendChild(e);e.textContent="E-mail address successfully submitted!",e.classList.add("alert-success","w-100","p-2"),newsLetterSection.appendChild(e),newsLetterSection.children[0].children[0].removeChild(newsLetterEmail),newsLetterSection.children[0].children[0].removeChild(newsLetterButton),sentEmail=!0}});var _require=require("gulp"),src=_require.src,dest=_require.dest,watch=_require.watch,series=_require.series,parallel=_require.parallel,browsersync=require("browser-sync").create(),concat=require("gulp-concat"),uglify=require("gulp-uglify"),babel=require("gulp-babel"),jshint=require("gulp-jshint"),files={jsPath:"*.js",htmlPath:"*.html"};function jsTask(){return src([files.jsPath]).pipe(jshint({esversion:8})).pipe(jshint.reporter("default")).pipe(babel({presets:["@babel/preset-env"]})).pipe(concat("all.js")).pipe(uglify()).pipe(dest("dist"))}function htmlTask(){return src([files.htmlPath]).pipe(dest("dist"))}function watchTask(){watch([files.jsPath,files.htmlPath],parallel(jsTask,htmlTask))}function browserSync(e){browsersync.init({server:"./dist",port:8080,ui:{port:8081}}),e()}exports.default=series(parallel(htmlTask,jsTask),browserSync,watchTask);